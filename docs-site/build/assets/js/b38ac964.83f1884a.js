"use strict";(self.webpackChunkterrarium_documentation=self.webpackChunkterrarium_documentation||[]).push([[545],{15680:(e,t,n)=>{n.d(t,{xA:()=>u,yg:()=>d});var a=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),c=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(o.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},y=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(n),y=r,d=p["".concat(o,".").concat(y)]||p[y]||m[y]||i;return n?a.createElement(d,l(l({ref:t},u),{},{components:n})):a.createElement(d,l({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=y;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[p]="string"==typeof e?e:r,l[1]=s;for(var c=2;c<i;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}y.displayName="MDXCreateElement"},34304:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(58168),r=(n(96540),n(15680));const i={sidebar_position:3},l="Security Best Practices",s={unversionedId:"api/auth/security",id:"api/auth/security",title:"Security Best Practices",description:"Learn how to secure your Terrarium API integration.",source:"@site/docs/api/auth/security.md",sourceDirName:"api/auth",slug:"/api/auth/security",permalink:"/docs/api/auth/security",draft:!1,editUrl:"https://github.com/CharlesIXofFrance/terrarium/tree/main/docs-site/docs/api/auth/security.md",tags:[],version:"current",lastUpdatedBy:"samgonzalez",lastUpdatedAt:1736899908,formattedLastUpdatedAt:"Jan 15, 2025",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docs",previous:{title:"Managing Tokens",permalink:"/docs/api/auth/tokens"},next:{title:"Authentication",permalink:"/docs/api/authentication"}},o={},c=[{value:"Authentication Security",id:"authentication-security",level:2},{value:"1. Token Management",id:"1-token-management",level:3},{value:"2. Storage Security",id:"2-storage-security",level:3},{value:"3. Transport Security",id:"3-transport-security",level:3},{value:"API Security",id:"api-security",level:2},{value:"1. Rate Limiting",id:"1-rate-limiting",level:3},{value:"2. Input Validation",id:"2-input-validation",level:3},{value:"3. Error Handling",id:"3-error-handling",level:3},{value:"Infrastructure Security",id:"infrastructure-security",level:2},{value:"1. Network Security",id:"1-network-security",level:3},{value:"2. Monitoring",id:"2-monitoring",level:3},{value:"3. Compliance",id:"3-compliance",level:3},{value:"Security Checklist",id:"security-checklist",level:2},{value:"Development",id:"development",level:3},{value:"Deployment",id:"deployment",level:3},{value:"Maintenance",id:"maintenance",level:3}],u={toc:c},p="wrapper";function m(e){let{components:t,...n}=e;return(0,r.yg)(p,(0,a.A)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"security-best-practices"},"Security Best Practices"),(0,r.yg)("p",null,"Learn how to secure your Terrarium API integration."),(0,r.yg)("h2",{id:"authentication-security"},"Authentication Security"),(0,r.yg)("h3",{id:"1-token-management"},"1. Token Management"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Never share tokens"),(0,r.yg)("li",{parentName:"ul"},"Rotate tokens regularly"),(0,r.yg)("li",{parentName:"ul"},"Use appropriate token scopes"),(0,r.yg)("li",{parentName:"ul"},"Implement token revocation")),(0,r.yg)("h3",{id:"2-storage-security"},"2. Storage Security"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"// \u274c Avoid storing tokens in localStorage\nlocalStorage.setItem('token', 'secret-token');\n\n// \u2705 Store tokens in memory\nlet token = 'secret-token';\n\n// \u2705 Use HTTP-only cookies for refresh tokens\n// Server-side code\nres.cookie('refresh_token', token, {\n  httpOnly: true,\n  secure: true,\n  sameSite: 'strict',\n  maxAge: 30 * 24 * 60 * 60 * 1000, // 30 days\n});\n")),(0,r.yg)("h3",{id:"3-transport-security"},"3. Transport Security"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Always use HTTPS"),(0,r.yg)("li",{parentName:"ul"},"Implement certificate pinning"),(0,r.yg)("li",{parentName:"ul"},"Use secure headers")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"// Example headers for security\n{\n  'Strict-Transport-Security': 'max-age=31536000; includeSubDomains',\n  'X-Content-Type-Options': 'nosniff',\n  'X-Frame-Options': 'DENY',\n  'X-XSS-Protection': '1; mode=block'\n}\n")),(0,r.yg)("h2",{id:"api-security"},"API Security"),(0,r.yg)("h3",{id:"1-rate-limiting"},"1. Rate Limiting"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Implement rate limiting"),(0,r.yg)("li",{parentName:"ul"},"Use exponential backoff"),(0,r.yg)("li",{parentName:"ul"},"Handle rate limit errors")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"class RateLimiter {\n  constructor() {\n    this.attempts = 0;\n    this.lastAttempt = null;\n  }\n\n  async handleRateLimit() {\n    this.attempts++;\n    const delay = Math.min(1000 * Math.pow(2, this.attempts), 30000);\n    await new Promise((resolve) => setTimeout(resolve, delay));\n  }\n\n  reset() {\n    this.attempts = 0;\n    this.lastAttempt = null;\n  }\n}\n")),(0,r.yg)("h3",{id:"2-input-validation"},"2. Input Validation"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Validate all inputs"),(0,r.yg)("li",{parentName:"ul"},"Use strict schemas"),(0,r.yg)("li",{parentName:"ul"},"Sanitize data")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"// Example input validation\nconst schema = {\n  email: (value) => /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value),\n  password: (value) => value.length >= 8,\n  name: (value) => typeof value === 'string' && value.length > 0,\n};\n\nfunction validateInput(data, schema) {\n  const errors = {};\n\n  for (const [field, validator] of Object.entries(schema)) {\n    if (!validator(data[field])) {\n      errors[field] = `Invalid ${field}`;\n    }\n  }\n\n  return errors;\n}\n")),(0,r.yg)("h3",{id:"3-error-handling"},"3. Error Handling"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Don't expose sensitive info"),(0,r.yg)("li",{parentName:"ul"},"Use proper status codes"),(0,r.yg)("li",{parentName:"ul"},"Log security events")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"// Example error handler\nfunction handleError(error) {\n  // Log the full error internally\n  logger.error(error);\n\n  // Return safe error to client\n  return {\n    error: {\n      code: error.code,\n      message: error.publicMessage,\n      requestId: error.requestId,\n    },\n  };\n}\n")),(0,r.yg)("h2",{id:"infrastructure-security"},"Infrastructure Security"),(0,r.yg)("h3",{id:"1-network-security"},"1. Network Security"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Use VPC"),(0,r.yg)("li",{parentName:"ul"},"Implement firewalls"),(0,r.yg)("li",{parentName:"ul"},"Enable DDoS protection")),(0,r.yg)("h3",{id:"2-monitoring"},"2. Monitoring"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Monitor API usage"),(0,r.yg)("li",{parentName:"ul"},"Track failed attempts"),(0,r.yg)("li",{parentName:"ul"},"Set up alerts")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"// Example monitoring\nasync function monitorAPIUsage(event) {\n  await metrics.increment('api.requests', {\n    endpoint: event.endpoint,\n    method: event.method,\n    status: event.status,\n    client: event.clientId,\n  });\n\n  if (event.status >= 400) {\n    await alerts.notify({\n      type: 'api_error',\n      details: event,\n    });\n  }\n}\n")),(0,r.yg)("h3",{id:"3-compliance"},"3. Compliance"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Follow GDPR requirements"),(0,r.yg)("li",{parentName:"ul"},"Implement data retention"),(0,r.yg)("li",{parentName:"ul"},"Handle data deletion")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"// Example data retention policy\nasync function handleDataRetention() {\n  // Delete data older than retention period\n  await db.execute(`\n    DELETE FROM audit_logs\n    WHERE created_at < NOW() - INTERVAL '90 days'\n  `);\n\n  // Archive important data\n  await db.execute(`\n    INSERT INTO audit_logs_archive\n    SELECT * FROM audit_logs\n    WHERE created_at < NOW() - INTERVAL '30 days'\n  `);\n}\n")),(0,r.yg)("h2",{id:"security-checklist"},"Security Checklist"),(0,r.yg)("h3",{id:"development"},"Development"),(0,r.yg)("ul",{className:"contains-task-list"},(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Use secure dependencies"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Implement input validation"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Handle errors properly"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Use secure configurations")),(0,r.yg)("h3",{id:"deployment"},"Deployment"),(0,r.yg)("ul",{className:"contains-task-list"},(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Enable HTTPS"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Configure security headers"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Set up monitoring"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Implement backups")),(0,r.yg)("h3",{id:"maintenance"},"Maintenance"),(0,r.yg)("ul",{className:"contains-task-list"},(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Update dependencies"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Rotate credentials"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Review access logs"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Test security measures")))}m.isMDXComponent=!0}}]);